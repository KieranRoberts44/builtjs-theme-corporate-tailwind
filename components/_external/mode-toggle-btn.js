import React from "react";
import { pages } from "../../content/data/pages.json";
import useDarkMode from "use-dark-mode";

import { useEffect, useState } from "react";

export const useLoaded = () => {
  const [loaded, setLoaded] = useState(false);
  useEffect(() => setLoaded(true), []);
  return loaded;
};

export default function ModeToggleBtn() {
  const loaded = useLoaded();
  const darkMode = useDarkMode(false, {
    classNameDark: "dark",
    classNameLight: "light",
  });

  return (
    <div className="toggle-mode-btn" onClick={darkMode.toggle}>
      {darkMode && (
        <svg className="sun-moon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          {loaded && darkMode.value && (
            <path
              className="sun"
              d="M15.4375 6.9375L13.5625 5.6875L14 3.46875C14.0625 3.0625 13.9375 2.625 13.6562 2.3125C13.3438 2.03125 12.9062 1.90625 12.5 1.96875L10.2812 2.40625L9.03125 0.53125C8.5625 -0.15625 7.40625 -0.15625 6.9375 0.53125L5.6875 2.40625L3.46875 1.96875C3.0625 1.90625 2.625 2.03125 2.34375 2.34375C2.03125 2.625 1.90625 3.0625 1.96875 3.46875L2.40625 5.6875L0.53125 6.9375C0.1875 7.1875 0 7.5625 0 8C0 8.40625 0.1875 8.8125 0.53125 9.03125L2.40625 10.3125L1.96875 12.5312C1.90625 12.9375 2.03125 13.375 2.34375 13.6562C2.625 13.9688 3.03125 14.0938 3.46875 14L5.6875 13.5938L6.9375 15.4688C7.1875 15.8125 7.5625 16 8 16C8.40625 16 8.8125 15.8125 9.03125 15.4688L10.2812 13.5938L12.5 14C12.9375 14.0938 13.3438 13.9688 13.6562 13.6562C13.9375 13.375 14.0625 12.9375 14 12.5312L13.5625 10.3125L15.4375 9.0625C15.7812 8.8125 16 8.40625 16 8C16 7.5625 15.7812 7.1875 15.4375 6.9375ZM11.9062 9.625L12.4375 12.4688L9.59375 11.9375L8 14.3125L6.375 11.9062L3.53125 12.4688L4.0625 9.625L1.6875 8L4.0625 6.375L3.53125 3.53125L6.375 4.0625L8 1.65625L9.59375 4.0625L12.4375 3.53125L11.9062 6.375L14.3125 8L11.9062 9.625ZM8 4.75C6.1875 4.75 4.75 6.21875 4.75 8C4.75 9.8125 6.1875 11.25 8 11.25C9.78125 11.25 11.25 9.8125 11.25 8C11.25 6.21875 9.78125 4.75 8 4.75ZM8 9.75C7.03125 9.75 6.25 8.96875 6.25 8C6.25 7.0625 7.03125 6.25 8 6.25C8.9375 6.25 9.75 7.0625 9.75 8C9.75 8.96875 8.9375 9.75 8 9.75Z"
            />
          )}
          {loaded && !darkMode.value && (
            <path
              className="moon"
              d="M8.71875 16C11.1562 16 13.4375 14.9062 14.9062 13.0625C15.8125 11.9688 14.8438 10.375 13.4688 10.625C10.9062 11.125 8.53125 9.15625 8.53125 6.5625C8.53125 5.03125 9.34375 3.65625 10.625 2.9375C11.8438 2.25 11.5312 0.40625 10.1562 0.15625C9.6875 0.0625 9.21875 0.03125 8.71875 0C4.28125 0 0.71875 3.59375 0.71875 8C0.71875 12.4375 4.28125 16 8.71875 16ZM8.71875 1.5C9.125 1.5 9.5 1.5625 9.90625 1.625C8.1875 2.59375 7.03125 4.4375 7.03125 6.5625C7.03125 10.0938 10.2812 12.7812 13.75 12.0938C12.5625 13.5625 10.75 14.5 8.71875 14.5C5.125 14.5 2.21875 11.5938 2.21875 8C2.21875 4.4375 5.125 1.5 8.71875 1.5Z"
            />
          )}
        </svg>
      )}
      <style jsx>
        {`
          .toggle-mode-btn {
            position: absolute;
            top: 55px;
            right: 18px;
            z-index: 1000;
            cursor: pointer;
            padding: 10px;
          }
          .moon {
            fill: var(--clr-secondary);
          }
          .sun {
            fill: var(--clr-lightest);
          }
          @media only screen and (max-width: 1100px) {
            .toggle-mode-btn {
              top: 20px;
            }
          }
        `}
      </style>
    </div>
  );
}
